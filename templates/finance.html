{% extends "base.html" %}

{% block page_title %}Financial Management{% endblock %}

{% block content %}
<div class="row">
    <div class="col-4">
        <div class="stat-card">
            <div class="stat-title">Total Income</div>
            <div class="stat-number">R {{ "%.2f"|format(total_income) }}</div>
        </div>
    </div>
    
    <div class="col-4">
        <div class="stat-card">
            <div class="stat-title">Total Expenses</div>
            <div class="stat-number">R {{ "%.2f"|format(total_expenses) }}</div>
        </div>
    </div>
    
    <div class="col-4">
        <div class="stat-card">
            <div class="stat-title">Current Balance</div>
            <div class="stat-number">R {{ "%.2f"|format(balance) }}</div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="stat-card">
            <h3>Monthly Overview (Last 6 Months)</h3>
            <div style="display: flex; align-items: flex-end; gap: 20px; margin-top: 20px; height: 300px;">
                {% for month in monthly_income.keys() %}
                <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                    <div style="width: 40px; background: #2a7f4b; height: {{ (monthly_income.get(month, 0) / 100) }}px; max-height: 200px; margin-bottom: 5px;" title="Income: R {{ monthly_income.get(month, 0) }}"></div>
                    <div style="width: 40px; background: #e74c3c; height: {{ (monthly_expenses.get(month, 0) / 100) }}px; max-height: 200px; margin-bottom: 5px;" title="Expenses: R {{ monthly_expenses.get(month, 0) }}"></div>
                    <div style="font-size: 0.8rem;">{{ month }}</div>
                </div>
                {% endfor %}
            </div>
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                <span><span style="display: inline-block; width: 20px; height: 20px; background: #2a7f4b; margin-right: 5px;"></span> Income</span>
                <span><span style="display: inline-block; width: 20px; height: 20px; background: #e74c3c; margin-right: 5px;"></span> Expenses</span>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-6">
        <div class="stat-card">
            <h3>Category Dashboards</h3>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                <button class="btn btn-outline-success">Harvest Pledge</button>
                <button class="btn btn-outline-success">Tithe</button>
                <button class="btn btn-outline-success">Pledge</button>
                <button class="btn btn-outline-success">Kiosk</button>
                <button class="btn btn-outline-success">Project</button>
                <button class="btn btn-outline-success">Utilities</button>
                <button class="btn btn-outline-success">Events</button>
                <button class="btn btn-outline-success">Offering</button>
            </div>
        </div>
    </div>
    
    <div class="col-6">
        <div class="stat-card">
            <h3>Quick Actions</h3>
            <button class="btn btn-primary" style="width: 100%; margin-bottom: 10px;" onclick="showAddIncome()">
                <i class="fas fa-plus-circle"></i> Add Income
            </button>
            <button class="btn btn-danger" style="width: 100%; margin-bottom: 10px;" onclick="showAddExpense()">
                <i class="fas fa-minus-circle"></i> Add Expense
            </button>
            <button class="btn btn-info" style="width: 100%;" onclick="showTitheReport()">
                <i class="fas fa-chart-line"></i> Tithe Report
            </button>
        </div>
    </div>
</div>

<script>
    function showAddIncome() {
        alert('Add Income feature coming soon!');
    }
    
    function showAddExpense() {
        alert('Add Expense feature coming soon!');
    }
    
    function showTitheReport() {
        alert('Tithe Report feature coming soon!');
    }
</script>
{% endblock %}