{% extends "base.html" %}

{% block page_title %}Groups & Counseling{% endblock %}

{% block content %}
<div class="row">
    <div class="col-4">
        <div class="stat-card" style="text-align: center;">
            <div class="stat-title">Assigned Groups</div>
            <div class="stat-number">{{ groups|length }}</div>
        </div>
    </div>
    
    <div class="col-4">
        <div class="stat-card" style="text-align: center;">
            <div class="stat-title">Unassigned Groups</div>
            <div class="stat-number">0</div>
        </div>
    </div>
    
    <div class="col-4">
        <div class="stat-card" style="text-align: center;">
            <div class="stat-title">Available Users</div>
            <div class="stat-number">10</div>
        </div>
    </div>
</div>

<div class="stat-card">
    <h3>Current Assignments</h3>
    <p>Groups currently assigned to users</p>
    
    <table class="table">
        <thead>
            <tr>
                <th>GROUP</th>
                <th>ASSIGNED USER</th>
                <th>ASSIGNED DATE</th>
                <th>ASSIGNED BY</th>
                <th>ACTIONS</th>
            </tr>
        </thead>
        <tbody>
            {% for group in groups %}
            <tr>
                <td><strong>{{ group.name }}</strong></td>
                <td>{{ group.leader_name }}</td>
                <td>{{ group.created_date }}</td>
                <td>System</td>
                <td>
                    <button class="btn btn-sm btn-info" onclick="viewGroup('{{ group.group_id }}')">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-warning" onclick="editGroup('{{ group.group_id }}')">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="deleteGroup('{{ group.group_id }}')">
                        <i class="fas fa-trash"></i>
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="row">
    <div class="col-6">
        <div class="stat-card">
            <h3>Create New Group</h3>
            <div class="form-group">
                <label class="form-label">Group Name</label>
                <input type="text" class="form-control" id="new_group_name">
            </div>
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-control" id="new_group_description" rows="2"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Category</label>
                <select class="form-control" id="new_group_category">
                    <option>Men</option>
                    <option>Women</option>
                    <option>Youth</option>
                    <option>Prayer</option>
                    <option>Bible Study</option>
                    <option>Fellowship</option>
                </select>
            </div>
            <button class="btn btn-success" style="width: 100%;" onclick="createGroup()">
                <i class="fas fa-plus"></i> Create Group
            </button>
        </div>
    </div>
    
    <div class="col-6">
        <div class="stat-card">
            <h3>Book Counseling Session</h3>
            <div class="form-group">
                <label class="form-label">Select Group</label>
                <select class="form-control" id="counseling_group">
                    {% for group in groups %}
                    <option value="{{ group.group_id }}">{{ group.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Member Name</label>
                <input type="text" class="form-control" id="counseling_member">
            </div>
            <div class="form-group">
                <label class="form-label">Date</label>
                <input type="date" class="form-control" id="counseling_date">
            </div>
            <div class="form-group">
                <label class="form-label">Session Type</label>
                <select class="form-control" id="counseling_type">
                    <option>Individual</option>
                    <option>Couples</option>
                    <option>Family</option>
                    <option>Group</option>
                </select>
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="bookCounseling()">
                <i class="fas fa-calendar-check"></i> Book Session
            </button>
        </div>
    </div>
</div>

<script>
    function viewGroup(id) {
        alert('Viewing group: ' + id);
    }
    
    function editGroup(id) {
        alert('Edit group: ' + id);
    }
    
    function deleteGroup(id) {
        if(confirm('Are you sure you want to delete this group?')) {
            alert('Group deleted successfully!');
        }
    }
    
    function createGroup() {
        alert('New group created successfully!');
    }
    
    function bookCounseling() {
        alert('Counseling session booked successfully!');
    }
</script>
{% endblock %}